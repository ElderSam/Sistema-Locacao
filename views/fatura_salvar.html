<style>
    .linhaFrete {
        background-color: lightgray;
    }
</style>

<div id="layoutSidenav_content">
    <main>
        <div class="container-fluid">
            <!-- Invoices ------------------------------------------------------------------------------->
            <div>
                <div>
                    <br>
                    <div class="row">
                        <h3><b id="title">Cadastrar Fatura</b></h3>
                        <a id="btnShowPDF" class="btn btn-danger ml-4" href="/invoice/:idFatura/pdf/show"
                            title="ver PDF"> <i class="fas fa-file-pdf fa-lg"></i></a>
                        <button type="button" id="btnEmail" class="btn btn-warning ml-4" title="enviar PDF por e-mail"
                            data-toggle="modal" data-target="#emailModal">
                            <i class="fas fa-envelope fa-lg"></i>
                        </button>
                    </div>
                </div>

                <div>
                    <form id="formInvoice">
                        <!-- Formulário da Fatura -->
                        <div class="form-row">

                            <div class="form-group col-lg-3">
                                <label for="numFatura">Número da Fatura</label>
                                <input type="text" class="form-control" id="numFatura" name="numFatura"
                                    placeholder="000" value="" disabled="true">
                                <span class="help-block"></span>
                            </div>
                            
                            <div class="form-group col-lg-3">
                                <label for="dtEmissao">Data de Emissão</label>
                                <input type="date" class="form-control" id="dtEmissao" name="dtEmissao" value="">
                            </div>

                            <div class="form-group col-lg-3 bg-secondary">
                                <label for="dtInicio">Data de Início</label>
                                <input type="date" class="form-control" id="dtInicio" name="dtInicio" value="">
                            </div>

                            <div class="form-group col-lg-3 bg-secondary">
                                <label for="dtFim">Data Fim</label>
                                <input type="date" class="form-control" id="dtFim" name="dtFim" value="">
                            </div>

                            <div class="form-group col-lg-3">
                                <label for="enviarPorEmail">Enviar por Email</label>
                                <select class="form-control" id="enviarPorEmail" name="enviarPorEmail" value="">    
                                    <option selected value="1">Sim</option>  
                                    <option value="0">Não</option>                  
                                </select>
                            </div>

                            <div class="form-group col-lg-3">
                                <label for="emailEnvio">Email para Envio</label>
                                <input type="email" class="form-control" id="emailEnvio" name="emailEnvio"
                                    placeholder="exemplo@exemplo.com" value="">
                            </div>

                            <div class="form-group col-lg-3">
                                <label for="dtEnvio">Data de Envio</label>
                                <input type="date" class="form-control" id="dtEnvio" name="dtEnvio" value="">
                            </div>

                            <div class="form-group col-lg-3">
                                <label for="valorTotal">Valor Total</label>
                                <input type="text" class="form-control" id="valorTotal" name="valorTotal" value="">
                            </div>

                            <div class="form-group col-lg-3">
                                <label for="adicional">Adicional (R$)</label>
                                <input type="number" step=".01" class="form-control" id="adicional" name="adicional" value="">
                            </div>
                           
                            <div class="form-group col-md-12">
                                <label for="observacao">Observação</label>
                                <textarea maxlength="150" class="form-control" id="observacao" name="observacao"
                                    rows="3"></textarea>
                                <!--Caractetres Restantes: <span class="caracteres">150</span--><br>
                            </div>
                            

                            <!--Usado apenas para Editar -->
                            <div hidden="true">
                                <input type="text" id="idFatura" name="idFatura" value="">
                                <input type="text" id="idContrato" name="idContrato" value="{$idContrato}" hidden="true">                              
                            </div>

                            <!-- CAMPOS DA COBRANÇA -->
                            <h4 class="col-lg-12"> Dados de Cobrança</h4>

                            <div class="form-group col-lg-3">
                                <label for="formaPagamento">Forma de pagamento</label>
                                <select class="form-control" id="formaPagamento" name="formaPagamento" value="">    
                                    <option selected value="">escolha</option>  
                                    <option value="1">boleto</option>
                                    <option value="2">DOC</option>
                                    <option value="3">transferência</option>
                                    <option value="4">dinheiro</option>
                                    <option value="5">cheque</option>
                                    <option value="6">outros</option>          
                                </select>

                                <span class="help-block" style="background-color: white"></span>
                            </div>

                            <div class="form-group col-lg-3">
                                <label for="numeroNF">Nota Fiscal Nº</label>
                                <input type="text" class="form-control" id="numeroNF" name="numeroNF" value="">
                                <span class="help-block" style="background-color: white"></span>
                            </div>

                            <div class="form-group col-lg-3">
                                <label for="numeroBoletoProprio">Boleto Próprio Nº</label>
                                <input type="text" class="form-control" id="numeroBoletoProprio"
                                    name="numeroBoletoProprio" value="">
                                <span class="help-block" style="background-color: white"></span>
                            </div>

                            <div class="form-group col-lg-3">
                                <label for="numeroBoletoBanco">Boleto Bancario Nº</label>
                                <input type="text" class="form-control" id="numeroBoletoBanco" name="numeroBoletoBanco"
                                    value="">
                                <span class="help-block" style="background-color: white"></span>
                            </div>

                            <div class="form-group col-lg-3">
                                <label for="dtVencimento">Data de Vencimento</label>
                                <input type="date" class="form-control" id="dtVencimento" name="dtVencimento" value="">
                            </div>

                            <div class="form-group col-lg-3">
                                <label for="dtCobranca">Data de Cobrança</label>
                                <input type="date" class="form-control" id="dtCobranca" name="dtCobranca" value="">
                            </div>

                            <div class="form-group col-lg-3">
                                <label for="dtPagamento">Data de Pagamento</label>
                                <input type="date" class="form-control" id="dtPagamento" name="dtPagamento" value="">
                            </div>

                            <div class="form-group col-lg-3">
                                <label for="dtVerificacao">Data de Verificação</label>
                                <input type="date" class="form-control" id="dtVerificacao" name="dtVerificacao" value="">
                            </div>

                            <div class="form-group col-lg-3">
                                <label for="statusPagamento">Status do Pagamento</label>
                                <select class="form-control" id="statusPagamento" name="statusPagamento" value="">    
                                    <option selected value="0">Pendente</option>  
                                    <option value="1">Pago Parcialmente</option>   
                                    <option value="2">Pago</option> 
                                    <option value="3">Cancelado</option>
                                    <option value="4">Perdido</option>                  
                                </select>
                                <span class="help-block"></span>
                            </div>

                            <div class="form-group col-lg-3">
                                <label for="vlPago">Valor Pago</label>
                                <input type="text" class="form-control" id="vlPago" name="vlPago" value="">
                            </div>

                            <div class="form-group col-lg-6">
                                <label for="especCobranca">Especificação da Cobrança</label>
                                <input type="text" class="form-control" id="especCobranca" name="especCobranca" value="">
                            </div>

                        </div>

                        <div id="divListItens" class="ml-2" hidden="true">
                            <div class="row">
                                <!--Header List -->
                                <div class="col-lg-12" style="background-color: lightgrey;">
                                    <legend>Lista de Itens da Fatura:</legend>
                                </div>

                                <div class="col-lg-3">
                                    <button type="button" id="btnCart" class="btn btn-success float-right"
                                        data-toggle="modal" data-target="#rentModal">
                                        <i title="Adicionar Item a Fatura" class="fas fa-cart-plus"></i>
                                    </button>
                                </div>
                            </div>

                            <div class="table-responsive">
                                <table class="table table-bordered table-hover" id="dataTable" cellspacing="0">
                                    <thead style="background-color: lightcyan;">

                                        <tr>
                                            <th>período</th>
                                            <th>Valor Aluguel</th>
                                            <th>Entrega</th>
                                            <th>Retirada</th>
                                            <th>Início</th>
                                            <th>Fim</th>
                                            <th>Opções</th>
                                        </tr>
                                    </thead>
                                    <tbody>

                                    </tbody>

                                </table>
                            </div>
                        </div>
                    </form>

                    <span class="help-block status-form float-right" style="margin-top: -1.4rem;"></span>

                    <div style="margin: 0px; width: 100%;" class="breadcrumb justify-content-between">

                        <a href="/invoices" id="btnVoltar" class="btn btn-danger text-white">Voltar</a>

                        <div>
                            <!-- para desbloquear os campos para editar o procuto -->
                            <!-- <button type='button' title='excluir contrato' onclick='deleteContract();'
                            id="btnDeleteContract" class='btn btn-danger btnDelete'>
                            <i class='fas fa-trash'></i>
                            </button> -->

                            <!-- btnCreateContract and btnEditContract-->
                            <input id="btnSaveInvoice" type="submit" value="Cadastrar" class="btn btn-success">

                            <input id="btnUpdate" type="button" value="Editar" class="btn btn-primary">

                        </div>

                    </div><!----Aluguel Modal------------------------------------------------------------------------------->

            <div class="modal fade" id="rentModal" tabindex="-1" role="dialog" aria-labelledby="Detalhes da Fatura"
                aria-hidden="true">
                <div class="modal-dialog modal-lg" role="document">
                    <div class="modal-content">
                        <div style="margin-bottom: -1rem;" class="modal-header">
                            <h3 class="modal-title"><b id="modalTitle">Adicionar Item a Fatura</b></h3>
                            <button type="button" class="close" data-dismiss="modal">
                                <span>&times;</span>
                            </button>
                        </div>

                        <div class="modal-body">
                            <form id="formItem">
                                <!-- Formulário do Item -->
                                <div class="form-row">

                                    <div class="form-group col-lg-3">
                                        <label for="codeProduct">Código</label>
                                        <input type="text" class="form-control" id="codeProduct" name="codeProduct"
                                            placeholder="">
                                        <span class="help-block"></span>
                                    </div>
                                            
                                    <div hidden="true">
                                        <label for="idAluguel">Aluguel</label>
                                        <input type="text" id="idAluguel" name="idAluguel" value="">
                                    </div>

                                    
                                    <div class="form-group col-lg-3">
                                        <label for="periodoLocacao">Período de Locação</label>
                                        <input type="text" class="form-control" name="periodoLocacao" id="periodoLocacao">
                                    </div>

                                    <div class="form-group col-lg-3">
                                        <label for="vlAluguelCobrado">Valor cobrado</label>
                                        <input type="text" class="form-control" name="vlAluguelCobrado" id="vlAluguelCobrado">
                                    </div>

                                    <div class="form-group col-lg-3">
                                        <label for="vlFrete">Valor Frete</label>
                                        <input type="text" class="form-control" name="vlFrete" id="vlFrete">
                                    </div>

                                    <div class="form-group col-lg-3">
                                        <label for="dtInicio">Data de Início</label>
                                        <input type="date" class="form-control" id="dtInicio" name="dtInicio" value="">
                                    </div>

                                    <div class="form-group col-lg-3">
                                        <label for="dtFim">Data Final</label>
                                        <input type="date" class="form-control" id="dtFim" name="dtFim" value="">
                                    </div>
                            </form>

                            <span class="help-block status-form float-right" style="margin-top: -1.4rem;"></span>

                            <div style="margin: 0px; width: 100%;" class="breadcrumb justify-content-between">

                                <button id="btnClose" type="button" class="btn btn-secondary"
                                    data-dismiss="modal">Fechar</button>
                                <!-- btnCreateProduct and btnEditProduct-->
                                <input id="btnSaveItem" type="submit" value="Cadastrar" class="btn btn-success">

                                <!-- para desbloquear os camps para editar o aluguel -->
                                <input id="btnUpdate" type="button" value="Editar" class="btn btn-primary">

                            </div>

                        </div>

                    </div>

                </div>
            </div> <!-- end Aluguel Modal -->

            <!-- Email Modal------------------------------------------------------------------------------->
            <div class="modal fade" id="emailModal" tabindex="-1" role="dialog"
                aria-labelledby="Enviar fatura (PDF) por-mail" aria-hidden="true">
                <div class="modal-dialog modal-lg" role="document">
                    <div class="modal-content">
                        <div style="margin-bottom: -1rem;" class="modal-header">
                            <h3 class="modal-title"><b id="modalTitle">Enviar fatura (PDF) por-mail</b></h3>
                            <button type="button" class="close" data-dismiss="modal">
                                <span>&times;</span>
                            </button>
                        </div>

                        <div class="modal-body">
                            <form id="formEmail">
                                <!-- Formulário do Item -->
                                <div class="form-row">

                                    <div class="form-group col-lg-6">
                                        <label for="toAdress">E-mail do Cliente</label>
                                        <input type="email" class="form-control" name="toAdress" id="toAdress"
                                            placeholder="cliente@gmail.com">
                                        <span class="help-block"></span>
                                    </div>

                                    <div class="form-group col-lg-6">
                                        <label for="toName">Nome do Destinatário</label>
                                        <input type="text" class="form-control" name="toName" id="toName"
                                            placeholder="Ex: João da Silva">
                                        <span class="help-block"></span>
                                    </div>

                                    <div class="form-group col-lg-6">
                                        <label for="subject">Assunto</label>
                                        <input type="text" class="form-control" name="subject" id="subject"
                                            placeholder="Título do e-mail">
                                        <span class="help-block"></span>
                                    </div>

                                    <div class="form-group mt-4 col-lg-6">
                                        <p><b>OBS:</b> a fatura em PDF será enviado em anexo deste e-mail</p>
                                    </div>

                                    <div class="form-group col-lg-12">
                                        <label for="html">Mensagem</label>
                                        <textarea class="form-control" name="html" id="html"
                                            placeholder="A mensagem do e-mail" cols="30" rows="5"></textarea>
                                        <span class="help-block"></span>
                                    </div>
                                    <br>

                                </div>

                            </form>

                            <span class="help-block status-form float-right" style="margin-top: -1.4rem;"></span>

                            <div style="margin: 0px; width: 100%;" class="breadcrumb justify-content-between">

                                <button id="btnCloseEmail" type="button" class="btn btn-secondary"
                                    data-dismiss="modal">Fechar</button>
                                <!-- btnCreateProduct and btnEditProduct-->
                                <input id="btnSendEmail" type="submit" value="Enviar" class="btn btn-success">

                            </div>

                        </div>

                    </div>

                </div>
            </div> <!-- end Email Modal -->

        </div>

        <script src="/res/plugins/jquery/jquery-3.4.1.min.js"></script>
        <script src="/res/plugins/mask/jquery.mask.min.js"></script>
        <script src="/res/js/util.js"></script>
        <script src="/res/js/invoiceItens_save.js"></script>
        <script src="/res/js/invoice_save.js"></script>